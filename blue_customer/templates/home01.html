<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- 上述3个meta标签*必须*放在最前面，任何其他内容都*必须*跟随其后！ -->
    <meta name="description" content="">
    <meta name="author" content="">
    <title>Home Page for customers with valid reservations</title>
</head>
<script type="text/javascript" src="{{ url_for('static', filename='js/jquery.min.js') }}"></script>
<link href="{{ url_for('static', filename='css/bootstrap.min.css') }}" rel="stylesheet">
<script type="text/javascript" src="{{ url_for('static', filename='js/bootstrap.js') }}"></script>
<script type="text/javascript" src="{{ url_for('static', filename='js/bootstrap.min.js') }}"></script>
<link href="{{ url_for('static', filename='css/bootstrap.min.css') }}" rel="stylesheet">
<link rel="stylesheet" href="{{ url_for('static', filename='font-awesome-4.6.1/css/font-awesome.min.css') }}">
<link href="{{ url_for('static', filename='css/home.css') }}" rel="stylesheet">
 <script>
function deleteReservation(bookid){
 if(!window.confirm("Delete it?")){
    alert("press false");
 }
 else{
    window.location="/cancelreserve/"+bookid;
 }
};
 </script>
<body>

<!--导航条-->
<nav class="navbar navbar-default navbar-static-top">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar"
                    aria-expanded="false" aria-controls="navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="#">Parking Lot</a>
        </div>
        <div class="navbar-collapse collapse navbar-right" id="navbar">
            <ul class="nav navbar-nav head-nav">
                <li class="active">
                    <a href="#">Home</a>
                </li>
                <li>
                    <a href="{{ url_for('blue_customer.reserve') }}">Reserve</a>
                </li>
                <li>
                    <a href="{{ url_for('lot') }}">GetLot</a>
                </li>
                <li>
                    <a href="#">Others</a>
                </li>
            </ul>
        </div>
    </div>
</nav>
<div class="hidden-xs container">

    <div align="center">
        <table width="100%" height="100%" border="0" cellpadding="0" cellspacing="5">
            <tr>
                <td valign="top" align="center">
                    <marquee id="scrollarea" direction="up" scrolldelay="100" scrollamount="2" width=100% height="100" onmouseover="this.stop();" onmouseout="this.start();">
                        <div align="middle">
                            <h1><a href="customer-promotion.html"> Get 20% off NOW!  :)</a></h1>
                            <h1><a href="customer-promotion.html">RDJ  :)</a></h1>
                            <h1><a href="customer-promotion.html">Oh NOOOOO!!!!  :'(</a></h1>
                            <h1><a href="customer-promotion.html">Too Sweet  :'(</a></h1>
                            <h1><a href="customer-promotion.html">帅哥你好呀  :D</a></h1>
                            <h1><a href="customer-promotion.html">狗子且慢！！  >_<</a></h1>
                            <h1><a href="customer-promotion.html">Tony还在乎我，Steve傻乎乎地想道。</a></h1>
                        </div>

                    </marquee>
                </td>
        </table>
    </div>
    <!--显示当前预定状态-->
    {% if data or history %}
        <div class="tabcontent">
            <ul class="nav nav-tabs">
				<li role="presentation" class="active"><a href="#reservTbl" aria-controls="reservTbl" role="tab"
                                                          data-toggle="tab" id="tri-login">Valid Reservation</a>
                </li>
				<li role="presentation"><a href="#historyTbl" aria-controls="historyTbl" role="tab" data-toggle="tab"
                                           id="tri-register">History</a>
                </li>
            </ul>
            <div class="tab-content">
                <form role="tabpanel" class="tab-pane fade in active" id="reservTbl">
                    <table class="table table-bordered table-striped table-hover">
                        <thead>
                        <tr>
                            <th>Order_ID</th>
                            <th>StartTime</th>
                            <th>EndTime</th>
                            <th>Edit</th>
                        </tr>
                        </thead>
                        <tbody>
                        {% for book in data %}
                            <tr>
                                <td>{{ book.ID }}</td>
                                <td>{{ book.StartTime }}</td>
                                <td>{{ book.EndTime }}</td>
								<td><div align="center">
                                    <a href="/changereserve/{{ book.ID }}" class="btn btn-primary"><i class="fa fa-pencil-square-o" aria-hidden="true"></i></a>&nbsp;&nbsp;&nbsp;
									<a href="javascript:void(0)" class="btn btn-warning"  onclick="deleteReservation({{ book.ID }})"><i class="fa fa-trash-o" aria-hidden="true"></i></a>&nbsp;&nbsp;
									{% if book.PayStatus == '1' %}
									<a title="You have payed" href="#" class="btn btn-success" disabled="disabled" ><i class="fa fa-usd" aria-hidden="true"></i></a>
									{% endif %}
									{% if book.PayStatus == '0' %}
									<a title="Please pay" href="/payreserve/{{ book.ID }}" class="btn btn-warning" ><i class="fa fa-usd" aria-hidden="true"></i></a>
									{% endif %}
                                    </div></td>
                            </tr>
                        {% endfor %}
                        </tbody>
                    </table>
                    <p class="lead" align="center">
                        <a href="{{ url_for('blue_customer.reserve') }}" class="btn btn-primary"><i class="fa fa-plus-circle" aria-hidden="true"></i>&nbsp;Add a Reservation</a>
                    </p>
                </form>

                <form role="tabpanel" class="tab-pane fade" id="historyTbl">
                    <table class="table table-bordered table-striped table-hover" id="histry">
                        <thead>
                        <tr>
                            <th>Order_ID</th>
                            <th>StartTime</th>
                            <th>EndTime</th>
                            <th>Payment</th>
                        </tr>
                        </thead>
                        <tbody>
						{% for book in history %}
                        <tr>
							<td>{{ book.ID }}</td>
							<td>{{ book.StartTime }}</td>
							<td>{{ book.EndTime }}</td>
							<td>￥{{ book.Price }}</td>
                        </tr>
						{% endfor %}
                        </tbody>
                    </table>
                </form>

            </div>
        </div>
    {% else %}
        <div class="inner cover">
            <h1 class="cover-heading">Thank u for registration! :)</h1>
            <p class="lead">Park-a-Lot is made to help customers quickly and easily access to his vehicle.Give it a try
                now!</p>
            <p class="lead">
                <a href="{{ url_for('blue_customer.reserve') }}" class="btn btn-primary">Add a Reservation</a>
            </p>
        </div>
    {% endif %}
</div>


<div class="visible-xs container">
    <ul class="nav nav-tabs">
        <li role="presentation" class="active"><a href="#mobile-reservation-list" aria-controls="mobile-list" role="tab" data-toggle="tab">Valid Reservation</a>
        </li>
        <li role="presentation" ><a href="#mobile-history-list" aria-controls="mobile-history-list" role="tab" data-toggle="tab">History</a>
        </li>
    </ul>
    {% if data or history %}
        <div class="tab-content" style="padding-top: 10px;">
            <div  role="tabpanel" class="tab-pane fade in active" id="mobile-reservation-list">
                {% for book in data %}
                    <div class="panel panel-default reservation-item">
                        <div class="panel-body reservation-info">
                            <div class="order-id" >id:{{ book.ID }}</div>
                            <div class="start-time">From:{{ book.StartTime }}</div>
                            <div class="end-time">To:{{ book.EndTime }}</div>
                        </div>
                        <div class="panel-footer reservation-operation" >
                            <a href="/changereserve/{{ book.ID }}" class="btn btn-primary" style="width: 32%"><i class="fa fa-pencil-square-o" aria-hidden="true"></i>&nbsp;Edit</a>
                            <a href="javascript:void(0)" class="btn btn-warning"  onclick="deleteReservation({{ book.ID }})" style="width: 32%"><i class="fa fa-trash-o" aria-hidden="true"></i>&nbsp;Cancel</a>
                            {% if book.PayStatus == '1' %}
                            <a title="You have payed" href="#" class="btn btn-success" disabled="disabled" style="width: 32%"><i class="fa fa-usd" aria-hidden="true"></i>&nbsp;Payed</a>
							{% endif %}
							{% if book.PayStatus == '0' %}
							<a title="Please pay" href="/payreserve/{{ book.ID }}" class="btn btn-warning"style="width: 32%" ><i class="fa fa-usd" aria-hidden="true"></i>&nbsp;Pay</a>
							{% endif %}
                        </div>
                    </div>
                {% endfor %}
                <p align="center"><a href="{{ url_for('blue_customer.reserve') }}" class="btn btn-lg btn-primary"><i class="fa fa-plus-circle" aria-hidden="true"></i>&nbsp;Add a Reservation</a></p>
            </div>

            <div  role="tabpanel" class="tab-pane fade" id="mobile-history-list">
                {% for book in history %}
                    <div class="panel panel-default payment-item">
                        <div class="panel-body reservation-info">
                            <div class="order-id"  >id:{{ book.ID }}</div>
                            <div class="start-time" >From:{{ book.StartTime }}</div>
                            <div class="end-time" >To:{{ book.EndTime }}</div>
                            <div class="payment">Payment:${{ book.Price }}</div>
                        </div>
                    </div>
                {% endfor %}
            </div>
            {% else %}
            <div class="inner cover">
                <h1 class="cover-heading">Thank u for registration! :)</h1>
                <p class="lead">Park-a-Lot is made to help customers quickly and easily access to his vehicle.Give it a try
                    now!</p>
                <p class="lead">
                    <a href="{{ url_for('blue_customer.reserve') }}" class="btn btn-primary">Add a Reservation</a>
                </p>
            </div>
            {% endif %}
        </div>
</div>
</body>
</html>
